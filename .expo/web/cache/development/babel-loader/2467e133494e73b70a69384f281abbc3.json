{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AccessibilityInfo from \"react-native-web/dist/exports/AccessibilityInfo\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport AppState from \"react-native-web/dist/exports/AppState\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport useColorScheme from \"react-native-web/dist/exports/useColorScheme\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Component, useEffect, useRef, useState } from \"react\";\nimport * as React from \"react\";\nimport { styles } from \"../css\";\nimport { Btn, DCBtn } from \"../component/btn\";\nimport { Portrait, Portraits } from \"../component/portrait\";\nimport { _emoji, _List, _User, ip } from \"../_Api\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport { io } from \"socket.io-client\";\nimport { timeIm } from \"../utils/time\";\nimport * as Haptics from 'expo-haptics';\nimport { listNotifications } from \"../utils/notificationsFun\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar socket = io(\"ws://\" + ip + \":3000\");\nexport function List(_ref) {\n  var navigation = _ref.navigation;\n  var colorScheme = useColorScheme();\n  var C1 = colorScheme == 'light' ? styles.lightC1 : styles.darkC1;\n  var C2 = colorScheme == 'light' ? styles.lightC2 : styles.darkC2;\n  var BbC = colorScheme == 'light' ? styles.lightBbC : styles.darkBbC;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    load = _useState2[0],\n    setLoad = _useState2[1];\n  var _useState3 = useState(Array),\n    _useState4 = _slicedToArray(_useState3, 2),\n    list = _useState4[0],\n    setList = _useState4[1];\n  var listRef = useRef(list);\n  listRef.current = list;\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    emoji = _useState6[0],\n    setEmoji = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    login = _useState8[0],\n    setLogin = _useState8[1];\n  var _useState9 = useState({}),\n    _useState10 = _slicedToArray(_useState9, 2),\n    user = _useState10[0],\n    setUser = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    page = _useState12[0],\n    setPage = _useState12[1];\n  var _useState13 = useState('active'),\n    _useState14 = _slicedToArray(_useState13, 2),\n    handler = _useState14[0],\n    setHandler = _useState14[1];\n  var handlerRef = useRef(handler);\n  handlerRef.current = handler;\n  var nfTitle = function nfTitle(li) {\n    console.log('推送类型1', li.imType);\n    if (li.imType == '2') {\n      return li.imTitle;\n    }\n    if (user.id == li.userArr[0].id) {\n      return li.userArr[1].name;\n    } else {\n      return li.userArr[0].name;\n    }\n  };\n  useFocusEffect(React.useCallback(function () {\n    AppState.addEventListener(\"change\", function (handler) {\n      console.log('handler', handler);\n      setHandler(handler);\n    });\n    AsyncStorage.getItem('tokenIn').then(function () {\n      var _ref2 = _asyncToGenerator(function* (tokenIn) {\n        var time = Date.parse(new Date()) / 1000;\n        if (time < tokenIn) {\n          setLogin(true);\n          yield _User(function (cb) {\n            setUser(cb);\n            navigation.setOptions({\n              headerLeft: function headerLeft() {\n                return _jsxs(TouchableOpacity, {\n                  style: styles.listTitle,\n                  onPress: function onPress() {\n                    return navigation.navigate('Add');\n                  },\n                  children: [_jsx(Text, {\n                    style: styles.listTitleT1,\n                    children: \"\\uD83D\\uDCEC\"\n                  }), _jsx(Text, {\n                    style: styles.listTitleT2,\n                    children: \"3\"\n                  })]\n                });\n              },\n              headerRight: function headerRight() {\n                return _jsx(Pressable, {\n                  onPress: function onPress() {\n                    return navigation.navigate('Me');\n                  },\n                  onLongPress: function onLongPress() {\n                    return setEmoji(true);\n                  },\n                  children: _jsx(Text, {\n                    style: {\n                      fontSize: 23\n                    },\n                    children: cb.emoji\n                  })\n                });\n              }\n            });\n            _List(function (cb) {\n              setList(_toConsumableArray(cb));\n            });\n            socket.on(cb._id, function () {\n              var _ref3 = _asyncToGenerator(function* (li) {\n                if (handler == 'background') {\n                  console.log(222);\n                  listNotifications('111', '222');\n                } else {\n                  console.log(111);\n                }\n                Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n                var arr = listRef.current;\n                arr.map(function (item, index) {\n                  if (item._id == li._id) {\n                    arr.splice(index, 1);\n                    arr.unshift(li);\n                  }\n                });\n                setList(_toConsumableArray(arr));\n              });\n              return function (_x2) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          });\n        } else {\n          console.log('登陆过期，重新登陆');\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return function () {\n      socket.off(user._id);\n      console.log('离开list,断开链接：' + user._id);\n    };\n  }, []));\n  var unreadFun = function unreadFun(arr, id) {\n    var arrNumber = [];\n    arr.map(function (item, index) {\n      if (item == id) {\n        arrNumber.push(arr);\n      }\n    });\n    if (arrNumber.length >= 99) {\n      return '...';\n    } else {\n      return arrNumber.length;\n    }\n  };\n  var emojiArr = [\"😀\", \"😁\", \"😂\", \"🤣\", \"😃\", \"😅\", \"😉\", \"😊\", \"😋\", \"😎\", \"😍\", \"😘\", \"😗\", \"🙂\", \"🤗\", \"🤔\", \"😐\", \"😶\", \"🙄\", \"😏\", \"😣\", \"😥\", \"🤐\", \"😪\", \"😫\", \"😴\", \"😌\", \"😛\", \"😜\", \"🤤\", \"😒\", \"😔\", \"😕\", \"🤑\", \"😢\", \"😭\"];\n  if (login) {\n    return _jsxs(View, {\n      style: [styles.List, C1],\n      children: [emoji ? _jsx(View, {\n        style: styles.yan,\n        children: _jsx(FlatList, {\n          data: emojiArr,\n          horizontal: true,\n          renderItem: function renderItem(_ref4) {\n            var item = _ref4.item,\n              i = _ref4.i;\n            return _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                _emoji(item, function (cb) {\n                  navigation.setOptions({\n                    headerRight: function headerRight() {\n                      return _jsx(Pressable, {\n                        onPress: function onPress() {\n                          return navigation.navigate('Me');\n                        },\n                        onLongPress: function onLongPress() {\n                          return setEmoji(true);\n                        },\n                        children: _jsx(Text, {\n                          style: {\n                            fontSize: 23\n                          },\n                          children: item\n                        })\n                      });\n                    }\n                  });\n                  setEmoji(false);\n                });\n              },\n              children: _jsx(Text, {\n                style: {\n                  fontSize: 26,\n                  marginRight: 5\n                },\n                children: item\n              })\n            });\n          }\n        })\n      }) : '', list ? _jsx(FlatList, {\n        data: list,\n        ItemSeparatorComponent: function ItemSeparatorComponent() {\n          return _jsx(View, {\n            style: [BbC, styles.listBbC]\n          });\n        },\n        refreshing: load,\n        onRefresh: function onRefresh() {\n          setLoad(true);\n          _List(function (cb) {\n            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n            setLoad(false);\n            setList(_toConsumableArray(cb));\n          });\n        },\n        renderItem: function renderItem(_ref5) {\n          var item = _ref5.item;\n          return _jsxs(TouchableOpacity, {\n            style: [styles.ListRow],\n            onPress: function onPress() {\n              return navigation.navigate('Im', {\n                list: item._id\n              });\n            },\n            children: [item.imType == '2' ? _jsx(Portraits, {\n              imgArr: item.userArr,\n              unread: unreadFun(item.unread, user._id)\n            }) : _jsx(Portrait, {\n              w: 38,\n              h: 38,\n              r: 3,\n              t: user.id == item.userArr[0].id ? item.userArr[1].emoji : item.userArr[0].emoji,\n              url: user.id == item.userArr[0].id ? item.userArr[1].avatar : item.userArr[0].avatar,\n              unread: unreadFun(item.unread, user._id)\n            }), _jsxs(View, {\n              style: [styles.ListLi],\n              children: [item.imType == '2' ? _jsx(Text, {\n                style: [styles.T4, C2, styles.bold],\n                children: item.imTitle\n              }) : _jsx(Text, {\n                style: [styles.T4, C2, styles.bold],\n                children: user.id == item.userArr[0].id ? item.userArr[1].name : item.userArr[0].name\n              }), _jsx(Text, {\n                style: [styles.T5, C2, styles.bold, {\n                  opacity: 0.6\n                }],\n                numberOfLines: 1,\n                children: item.text\n              })]\n            }), _jsx(Text, {\n              style: [styles.T6, C2, styles.bold, {\n                marginRight: 10,\n                opacity: 0.3\n              }],\n              children: timeIm(item.updatedAt)\n            })]\n          });\n        }\n      }) : _jsx(Text, {\n        children: \"\\u4EC0\\u4E48\\u90FD\\u4E48\\u6709\"\n      })]\n    });\n  } else {\n    return _jsxs(View, {\n      style: [C1, styles.listLogin],\n      children: [_jsx(Image, {\n        style: styles.listLoginImg\n      }), _jsx(Text, {\n        style: styles.listBtn,\n        onPress: function onPress() {\n          return navigation.navigate('Login');\n        },\n        children: \" \\u767B\\u9646\\u4F7F\\u7528 \"\n      })]\n    });\n  }\n}","map":{"version":3,"names":["Component","useEffect","useRef","useState","React","styles","Btn","DCBtn","Portrait","Portraits","_emoji","_List","_User","ip","AsyncStorage","useFocusEffect","io","timeIm","Haptics","listNotifications","socket","List","navigation","colorScheme","useColorScheme","C1","lightC1","darkC1","C2","lightC2","darkC2","BbC","lightBbC","darkBbC","load","setLoad","Array","list","setList","listRef","current","emoji","setEmoji","login","setLogin","user","setUser","page","setPage","handler","setHandler","handlerRef","nfTitle","li","console","log","imType","imTitle","id","userArr","name","useCallback","AppState","addEventListener","getItem","then","tokenIn","time","Date","parse","cb","setOptions","headerLeft","listTitle","navigate","listTitleT1","listTitleT2","headerRight","fontSize","on","_id","impactAsync","ImpactFeedbackStyle","Heavy","arr","map","item","index","splice","unshift","off","unreadFun","arrNumber","push","length","emojiArr","yan","i","marginRight","listBbC","ListRow","unread","avatar","ListLi","T4","bold","T5","opacity","text","T6","updatedAt","listLogin","listLoginImg","listBtn"],"sources":["/Users/hez/code/boatApp/src/views/list.js"],"sourcesContent":["import {\n    AccessibilityInfo,\n    ActivityIndicator, AppState,\n    Button,\n    FlatList,\n    Image,\n    Platform, Pressable,\n    ScrollView,\n    Text,\n    TouchableOpacity,\n    useColorScheme,\n    View,\n} from \"react-native\";\nimport {Component, useEffect, useRef, useState} from \"react\";\nimport * as React from \"react\";\nimport {styles} from \"../css\";\nimport {Btn, DCBtn} from \"../component/btn\";\nimport {Portrait, Portraits} from \"../component/portrait\";\nimport {_emoji, _List, _User, ip} from \"../_Api\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {useFocusEffect} from \"@react-navigation/native\";\nimport {io} from \"socket.io-client\";\nimport {timeIm} from \"../utils/time\";\nimport * as Haptics from 'expo-haptics';\nimport {listNotifications} from \"../utils/notificationsFun\";\n\nconst socket = io(`ws://${ip}:3000`)\n\nexport function List({navigation}) {\n\n    const colorScheme = useColorScheme();\n    const C1 = colorScheme == 'light' ? styles.lightC1 : styles.darkC1\n    const C2 = colorScheme == 'light' ? styles.lightC2 : styles.darkC2\n    const BbC = colorScheme == 'light' ? styles.lightBbC : styles.darkBbC\n\n    const [load, setLoad] = useState(false)\n    const [list, setList] = useState(Array)      //联系人列表\n    const listRef = useRef(list)\n    listRef.current = list\n\n    const [emoji, setEmoji] = useState(false)      //设置表情\n    const [login,setLogin] =useState(false)      //登陆提示\n\n\n    const [user, setUser] = useState({}) //用户信息\n    const [page,setPage] = useState(0)      //页码\n\n    const [handler,setHandler] =useState('active')  //前后台\n    const handlerRef = useRef(handler)\n    handlerRef.current = handler\n    \n    //推送标题\n    const nfTitle = (li) => {\n        console.log('推送类型1', li.imType)\n        if (li.imType == '2') {\n            return li.imTitle\n        }\n        if (user.id == li.userArr[0].id) {\n            return li.userArr[1].name\n        } else {\n            return li.userArr[0].name\n        }\n    }\n\n    useFocusEffect(\n        React.useCallback(() => {\n            //后台未读提醒\n            AppState.addEventListener(\"change\", (handler) => {\n                console.log('handler',handler)\n                setHandler(handler)\n            });\n\n            //token登陆鉴权\n            AsyncStorage.getItem('tokenIn').then(async tokenIn => {\n                let time = Date.parse(new Date()) / 1000\n                if (time < tokenIn) {\n                    setLogin(true)\n                    //用户信息\n                    await _User(cb => {\n                        // console.log('用户信道:', cb._id)\n                        setUser(cb)\n\n                        // 设置导航头\n                        navigation.setOptions({\n                            headerLeft: () => <TouchableOpacity style={styles.listTitle}\n                                                                onPress={() => navigation.navigate('Add')}>\n                                <Text style={styles.listTitleT1}>📬</Text>\n                                <Text style={styles.listTitleT2}>3</Text>\n                            </TouchableOpacity>,\n                            headerRight: () => <Pressable onPress={() => navigation.navigate('Me')}\n                                                          onLongPress={() => setEmoji(true)}>\n                                <Text style={{fontSize: 23}}>{cb.emoji}</Text>\n                            </Pressable>,\n                        })\n\n                        //联系人列表\n                        _List(cb => {\n                            setList([...cb])\n                        })\n\n                        // 接收信息\n                        socket.on(cb._id, async li => {\n                            if(handler=='background'){\n                                console.log(222)\n                                listNotifications('111','222')\n                            }else{\n                                console.log(111)\n                            }\n\n                            //震动手机\n                            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy)\n                            let arr = listRef.current\n                            arr.map((item, index) => {\n                                if (item._id == li._id) {\n                                    arr.splice(index, 1)\n                                    arr.unshift(li)\n                                }\n                            })\n                            setList([...arr])\n\n\n                        })\n                    })\n\n                } else {\n                    console.log('登陆过期，重新登陆')\n                }\n            })\n\n            return () => {\n                socket.off(user._id)\n                console.log('离开list,断开链接：' + user._id)\n            }\n        }, [])\n    )\n\n    //整理未读！\n    const unreadFun = function (arr, id) {\n        let arrNumber = []\n        arr.map((item, index) => {\n            if (item == id) {\n                arrNumber.push(arr)\n            }\n        })\n        if (arrNumber.length >= 99) {\n            return '...';\n        } else {\n            return arrNumber.length;\n        }\n\n    };\n\n\n    const emojiArr = [\"😀\", \"😁\", \"😂\", \"🤣\", \"😃\", \"😅\", \"😉\", \"😊\", \"😋\", \"😎\", \"😍\", \"😘\", \"😗\", \"🙂\", \"🤗\", \"🤔\", \"😐\",\n        \"😶\", \"🙄\", \"😏\", \"😣\", \"😥\", \"🤐\", \"😪\", \"😫\", \"😴\", \"😌\", \"😛\", \"😜\", \"🤤\", \"😒\", \"😔\", \"😕\", \"🤑\", \"😢\", \"😭\"]\n\n    if(login){\n        return <View style={[styles.List, C1]}>\n            {/*选择表情包*/}\n            {emoji ? <View style={styles.yan}>\n                <FlatList\n                    data={emojiArr}\n                    horizontal={true}\n                    renderItem={({item, i}) => <TouchableOpacity\n                        onPress={() => {\n                            _emoji(item, cb => {\n                                navigation.setOptions({\n                                    headerRight: () => <Pressable onPress={() => navigation.navigate('Me')}\n                                                                  onLongPress={() => setEmoji(true)}>\n                                        <Text style={{fontSize: 23}}>{item}</Text>\n                                    </Pressable>,\n                                })\n                                setEmoji(false)\n                            })\n                        }}>\n                        <Text style={{fontSize: 26, marginRight: 5}}>{item}</Text>\n                    </TouchableOpacity>}\n                />\n            </View> : ''}\n\n            {/*联系人列表*/}\n            {list ? <FlatList data={list}\n                              ItemSeparatorComponent={() => <View style={[BbC, styles.listBbC]}></View>}\n                              refreshing={load}\n                              onRefresh={() => {\n                                  setLoad(true)\n                                  _List(cb => {\n                                      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy)\n                                      setLoad(false)\n                                      setList([...cb])\n                                  })\n                              }}\n                              renderItem={({item}) =>\n                                  <TouchableOpacity style={[styles.ListRow]}\n                                                    onPress={() => navigation.navigate('Im', {list: item._id})}>\n                                      {item.imType == '2'?\n                                          <Portraits imgArr={item.userArr}  unread={unreadFun(item.unread, user._id)} />\n                                          :<Portrait w={38} h={38} r={3}\n                                                     t={user.id == item.userArr[0].id ? item.userArr[1].emoji : item.userArr[0].emoji}\n                                                     url={user.id == item.userArr[0].id ? item.userArr[1].avatar : item.userArr[0].avatar}\n                                                     unread={unreadFun(item.unread, user._id)}/>}\n                                      <View style={[styles.ListLi]}>\n                                          {item.imType == '2'?\n                                              <Text style={[styles.T4, C2, styles.bold]}>{item.imTitle}</Text>:\n                                              <Text style={[styles.T4, C2, styles.bold]}>{user.id == item.userArr[0].id ? item.userArr[1].name : item.userArr[0].name}</Text>\n                                          }\n                                          <Text style={[styles.T5, C2, styles.bold, {opacity: 0.6}]} numberOfLines={1}>{item.text}</Text>\n                                      </View>\n                                      <Text style={[styles.T6, C2, styles.bold, {\n                                          marginRight: 10,\n                                          opacity: 0.3\n                                      }]}>{timeIm(item.updatedAt)}</Text>\n                                  </TouchableOpacity>}/> : <Text>什么都么有</Text>}\n        </View>\n    }else {\n        return  <View style={[C1,styles.listLogin]}>\n            <Image style={styles.listLoginImg} />\n            <Text style={styles.listBtn} onPress={()=> navigation.navigate('Login')}> 登陆使用 </Text>\n        </View>\n    }\n\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}