{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar instance = axios.create({\n  baseURL: 'http://192.168.0.101:3000',\n  timeout: 1000,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport function _Login(tel) {\n  instance.post('/user', {\n    tel: tel\n  }).then(function (res) {\n    console.log('登陆', res.data);\n    AsyncStorage.setItem('token', res.data.token);\n    AsyncStorage.setItem('tokenIn', String(res.data.expiresIn));\n  });\n}\n\nexport var _User = function () {\n  var _ref = _asyncToGenerator(function* (cb) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    yield instance.get('/user').then(function (res) {\n      console.log('用户:', res.data.id);\n      cb(res.data);\n    }, function (err) {\n      console.log('错误', err);\n    });\n  });\n  return function _User(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport var _Quser = function () {\n  var _ref2 = _asyncToGenerator(function* (set, key) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.get(\"/user/query?key=\" + key).then(function (res) {\n      console.log('搜索用户', res, key);\n      set(res.data);\n    });\n  });\n  return function _Quser(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var _List = function () {\n  var _ref3 = _asyncToGenerator(function* (cb) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.get('/list').then(function (res) {\n      cb(res.data);\n    }, function (err) {\n      console.log('错误', err);\n    });\n  });\n  return function _List(_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport var _ListNull = function () {\n  var _ref4 = _asyncToGenerator(function* (set) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.get('/list/null').then(function (res) {\n      console.log('非联系人列表', res.data.length);\n      set(res.data);\n    }, function (err) {\n      console.log('错误', err);\n    });\n  });\n  return function _ListNull(_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport var _AddList = function () {\n  var _ref5 = _asyncToGenerator(function* (userId) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.post('list/im', {\n      userId: userId\n    }).then(function (res) {\n      console.log('添加好友', res.data);\n    }, function (err) {\n      console.log('添加失败', err);\n    });\n  });\n  return function _AddList(_x6) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nexport var _AddIm = function () {\n  var _ref6 = _asyncToGenerator(function* (list, cb) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.put(\"list/addIM/\" + list).then(function (res) {\n      console.log('通过申请', res.data);\n      cb();\n    }, function (err) {\n      console.log('通过申请失败', err);\n    });\n  });\n  return function _AddIm(_x7, _x8) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexport var _DelIm = function () {\n  var _ref7 = _asyncToGenerator(function* (list) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.delete(\"list/delIM/\" + list).then(function (res) {\n      console.log('拒绝申请', res.data);\n    }, function (err) {\n      console.log('拒绝申请失败', err);\n    });\n  });\n  return function _DelIm(_x9) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nexport var _Msg = function () {\n  var _ref8 = _asyncToGenerator(function* (list, cd) {\n    instance.get(\"list/msg/\" + list).then(function (res) {\n      cd(res.data.reverse());\n    });\n  });\n  return function _Msg(_x10, _x11) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nexport var _Unread = function () {\n  var _ref9 = _asyncToGenerator(function* (list, user) {\n    console.log('222', list, user);\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.put(\"list/unread/\" + list + \"/\" + user).then(function (res) {\n    });\n  });\n  return function _Unread(_x12, _x13) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nexport var _Column = function () {\n  var _ref10 = _asyncToGenerator(function* (q, cb) {\n    instance.defaults.headers['authorization'] = \"Bearer \" + (yield AsyncStorage.getItem('token'));\n    instance.post(\"list/column/\" + q).then(function (enQ) {\n      cb(enQ.data);\n    });\n  });\n  return function _Column(_x14, _x15) {\n    return _ref10.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","AsyncStorage","instance","create","baseURL","timeout","headers","Accept","_Login","tel","post","then","res","console","log","data","setItem","token","String","expiresIn","_User","cb","defaults","getItem","get","id","err","_Quser","set","key","_List","_ListNull","length","_AddList","userId","_AddIm","list","put","_DelIm","delete","_Msg","cd","reverse","_Unread","user","_Column","q","enQ"],"sources":["/Users/hez/code/boatApp/src/_Api.js"],"sourcesContent":["import axios from \"axios\";\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\nconst instance = axios.create( {\n    baseURL: 'http://192.168.0.101:3000',\n    timeout: 1000,\n    headers: {\n        Accept: 'application/json',\n        'Content-Type':'application/json'\n    }\n});\n\n// 登陆\nexport function _Login(tel){\n    instance.post('/user',{tel:tel}).then(res=>{\n        console.log('登陆',res.data)\n        AsyncStorage.setItem('token', res.data.token)\n        AsyncStorage.setItem('tokenIn', String(res.data.expiresIn))\n    })\n}\n\n//用户信息\nexport const _User = async (cb)=>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    await instance.get('/user').then(res=>{\n        console.log('用户:',res.data.id)\n        cb(res.data)\n    },err=>{\n        console.log('错误',err)\n    })\n}\n\n//搜索用户\nexport const _Quser = async (set,key)=>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.get(`/user/query?key=${key}`).then(res=>{\n        console.log('搜索用户',res,key)\n        set(res.data)\n    })\n\n}\n\n\n//获取信道\nexport const _List = async (cb)=>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.get('/list').then(res=>{\n        cb(res.data)\n    },err=>{\n        console.log('错误',err)\n    })\n}\n\n// 非好友信道\nexport const _ListNull = async (set) =>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.get('/list/null').then(res=>{\n        console.log('非联系人列表', res.data.length)\n        set(res.data)\n    },err=>{\n        console.log('错误',err)\n    })\n}\n\n//添加好友\nexport const _AddList = async  (userId)=>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.post('list/im' ,{userId:userId}).then(res=>{\n        console.log('添加好友',res.data)\n    },err=>{\n        console.log('添加失败',err)\n    })\n}\n\n\n//通过申请11\nexport const _AddIm = async (list,cb)=>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.put(`list/addIM/${list}` ).then(res=>{\n        console.log('通过申请',res.data)\n        cb()\n    },err=>{\n        console.log('通过申请失败',err)\n    })\n}\n\n//拒绝申请\nexport const _DelIm = async (list) =>{\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.delete(`list/delIM/${list}` ).then(res=>{\n        console.log('拒绝申请',res.data)\n    },err=>{\n        console.log('拒绝申请失败',err)\n    })\n}\n\n// 加载对话内容\nexport const _Msg= async (list,cd)=>{\n    instance.get(`list/msg/${list}`).then(res=>{\n        // console.log('聊天记录',res.data.length)\n        cd(res.data.reverse())\n    })\n}\n\n// 更新未读\nexport const _Unread = async (list,user)=>{\n    console.log('222', list, user)\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.put(`list/unread/${list}/${user}`).then(res=>{\n        // console.log('更新未读',res)\n    })\n}\n\n//词裂\nexport const _Column= async (q,cb)=> {\n    instance.defaults.headers['authorization'] = `Bearer ${await AsyncStorage.getItem('token')}`;\n    instance.post(`list/column/${q}`).then(enQ => {\n        // console.log('更新未读',res)\n        cb(enQ.data)\n    })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}