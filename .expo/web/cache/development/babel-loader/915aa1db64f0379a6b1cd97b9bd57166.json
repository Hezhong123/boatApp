{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport useColorScheme from \"react-native-web/dist/exports/useColorScheme\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { styles } from \"../css\";\nimport { _Login } from \"../_Api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Login(_ref) {\n  var navigation = _ref.navigation;\n  navigation.addListener('focus', function () {\n    navigation.setOptions({\n      headerShown: false\n    });\n    console.log('进入登陆');\n  });\n  navigation.addListener('blur', function () {\n    console.log('退出登陆');\n  });\n  var colorScheme = useColorScheme();\n  var C1 = colorScheme == 'light' ? styles.lightC1 : styles.darkC1;\n  var C2 = colorScheme == 'light' ? {\n    color: '#696A80'\n  } : styles.darkC2;\n  var Bbc = colorScheme == 'light' ? {\n    borderColor: '#696A80'\n  } : {\n    borderColor: '#fff'\n  };\n  var MsgColorTouchable = colorScheme == 'light' ? '#EAEAEA' : '#333C52';\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    m = _useState2[0],\n    setM = _useState2[1];\n  var refM = useRef(m);\n  refM.current = m;\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    end = _useState4[0],\n    setEnd = _useState4[1];\n  var _useState5 = useState(Number),\n    _useState6 = _slicedToArray(_useState5, 2),\n    tel = _useState6[0],\n    setTel = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    code = _useState8[0],\n    setCode = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    codeB = _useState10[0],\n    setCodeB = _useState10[1];\n  var mFun = function mFun() {\n    setM(10);\n    var intM = setInterval(function () {\n      if (refM.current == 1) {\n        clearInterval(intM);\n        setEnd(false);\n      }\n      setM(refM.current - 1);\n    }, 1000);\n  };\n  return _jsx(View, {\n    style: [styles.Login, C1],\n    children: _jsxs(View, {\n      style: [styles.LoginRow],\n      children: [_jsx(Text, {\n        style: [styles.T1, styles.bold, C2, {\n          marginBottom: 10\n        }, {\n          color: '#6A8DE2'\n        }],\n        children: \"\\u90AE\\u4EF6\\u767B\\u5F55 \"\n      }), _jsxs(Text, {\n        style: [styles.T5, C2, {\n          opacity: 0.9\n        }, styles.bold],\n        children: [\"\\u4F7F\\u7528\\u524D\\u8BF7\\u9605\\u8BFB \", _jsx(Text, {\n          style: styles.LoginRowColor,\n          children: \"\\u300AboatIM\\u4F7F\\u7528\\u534F\\u8BAE\\u300B\"\n        }), \"\\uFF0C\\u6CE8\\u518C\\u6216\\u4F7F\\u7528\\u4EE3\\u8868\\u60A8\\u540C\\u610F\\u6B64\\u534F\\u8BAE\\u3002 \"]\n      }), _jsxs(View, {\n        style: {\n          width: '60%',\n          marginTop: 30\n        },\n        children: [_jsxs(Text, {\n          style: [styles.T5, C2, styles.bold, {\n            opacity: 0.9\n          }],\n          children: [_jsx(Text, {\n            style: styles.LoginRed,\n            children: \"* \"\n          }), \"\\u8F93\\u5165\\u90AE\\u7BB1\"]\n        }), _jsx(TextInput, {\n          defaultValue: tel,\n          editable: end,\n          keyboardType: 'number-pad',\n          style: [C2, styles.LoginInputs, Bbc, styles.T5, {\n            marginBottom: 6\n          }],\n          value: tel,\n          returnKeyType: \"done\",\n          onChange: function onChange(t) {\n            return setTel(t);\n          },\n          onSubmitEditing: function onSubmitEditing(_ref2) {\n            var _ref2$nativeEvent = _ref2.nativeEvent,\n              text = _ref2$nativeEvent.text,\n              eventCount = _ref2$nativeEvent.eventCount,\n              target = _ref2$nativeEvent.target;\n            var myreg = /^[1][3,4,5,7,8][0-9]{9}$/;\n            if (myreg.test(text)) {\n              mFun();\n              setTel(text);\n              setCodeB(true);\n              setEnd(false);\n            } else {\n              Alert.alert('号码错误', '输入的电话格式不对');\n            }\n          },\n          onChangeText: function onChangeText(text) {\n            return setTel(text);\n          }\n        })]\n      }), codeB ? _jsxs(View, {\n        style: {\n          width: '30%',\n          marginTop: 20\n        },\n        children: [_jsxs(Text, {\n          style: [styles.T5, C2, styles.bold, {\n            opacity: 0.9\n          }],\n          children: [_jsx(Text, {\n            style: styles.LoginRed,\n            children: \"* \"\n          }), \"\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\"]\n        }), _jsx(TextInput, {\n          style: [C2, styles.LoginInputs, Bbc, styles.T5, {\n            marginBottom: 6\n          }],\n          defaultValue: code,\n          keyboardType: 'number-pad',\n          returnKeyType: \"done\",\n          onChange: function onChange(t) {\n            return setCode(t);\n          },\n          onSubmitEditing: function onSubmitEditing(_ref3) {\n            var _ref3$nativeEvent = _ref3.nativeEvent,\n              text = _ref3$nativeEvent.text,\n              eventCount = _ref3$nativeEvent.eventCount,\n              target = _ref3$nativeEvent.target;\n            var arg = /^\\d{6}$/;\n            if (arg.test(text)) {\n              console.log('验证码', text);\n              setCode(text);\n            } else {\n              Alert.alert('输入错误');\n            }\n          }\n        }), _jsx(View, {\n          children: m ? _jsxs(Text, {\n            style: [styles.T6, C2, styles.bold, styles.LoginYe],\n            children: [m, \"\\u79D2\"]\n          }) : _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return mFun();\n            },\n            children: _jsx(Text, {\n              style: [styles.T6, C2, styles.bold],\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6 \"\n            })\n          })\n        })]\n      }) : '', code.length == 6 ? _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return _Login(tel, function (cb) {\n            console.log('登陆信息', cb);\n            navigation.navigate('List');\n          });\n        },\n        children: _jsx(Text, {\n          style: styles.loginBtn,\n          children: \"\\u4F7F \\u7528\"\n        })\n      }) : '']\n    })\n  });\n}","map":{"version":3,"names":["useEffect","useRef","useState","styles","_Login","Login","navigation","addListener","setOptions","headerShown","console","log","colorScheme","useColorScheme","C1","lightC1","darkC1","C2","color","darkC2","Bbc","borderColor","MsgColorTouchable","m","setM","refM","current","end","setEnd","Number","tel","setTel","code","setCode","codeB","setCodeB","mFun","intM","setInterval","clearInterval","LoginRow","T1","bold","marginBottom","T5","opacity","LoginRowColor","width","marginTop","LoginRed","LoginInputs","t","nativeEvent","text","eventCount","target","myreg","test","Alert","alert","arg","T6","LoginYe","length","cb","navigate","loginBtn"],"sources":["/Users/hez/code/boatApp/src/views/login.js"],"sourcesContent":["import {Alert, Button, Text, TextInput, TouchableHighlight, TouchableOpacity, useColorScheme, View} from \"react-native\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {styles} from \"../css\";\nimport {_Login} from \"../_Api\";\n\n\nexport function Login({navigation}) {\n    navigation.addListener('focus', () => {\n        navigation.setOptions({\n            headerShown: false,\n        })\n        console.log('进入登陆')\n    })\n    navigation.addListener('blur', () => {\n        console.log('退出登陆')\n    })\n\n    const colorScheme = useColorScheme();\n    const C1 = colorScheme == 'light' ? styles.lightC1 : styles.darkC1\n    const C2 = colorScheme == 'light' ? {color: '#696A80'} : styles.darkC2\n    const Bbc = colorScheme == 'light' ? {borderColor: '#696A80'} : {borderColor: '#fff'}    //对话框颜色\n    const MsgColorTouchable = colorScheme == 'light' ? '#EAEAEA' : '#333C52'    //点击对话框\n\n    const [m, setM] = useState(0)   //验证码计时器\n    const refM = useRef(m)\n    refM.current = m\n\n    const [end,setEnd] = useState(true)   //获取验证码\n    const [tel,setTel] = useState(Number)   //电话\n    const [code,setCode] = useState(0) //验证码\n    const [codeB,setCodeB] = useState(false) //验证码\n\n\n    //计时器\n    const mFun = () => {\n        setM(10)\n        let intM = setInterval(() => {\n            if (refM.current == 1) {\n                clearInterval(intM)\n                setEnd(false)\n            }\n            setM(refM.current - 1)\n        }, 1000)\n    }\n\n    return <View style={[styles.Login, C1]}>\n        <View style={[styles.LoginRow]}>\n            <Text style={[styles.T1, styles.bold, C2, {marginBottom: 10}, {color: '#6A8DE2'}]}>邮件登录 </Text>\n            <Text style={[styles.T5, C2, {opacity: 0.9}, styles.bold]}>使用前请阅读 <Text\n                style={styles.LoginRowColor}>《boatIM使用协议》</Text>，注册或使用代表您同意此协议。 </Text>\n\n            <View style={{width: '60%', marginTop: 30}}>\n                <Text style={[styles.T5, C2, styles.bold, {opacity: 0.9}]}><Text style={styles.LoginRed}>* </Text>输入邮箱</Text>\n                <TextInput\n                    defaultValue={tel}\n                    editable={end}\n                    keyboardType={'number-pad'}\n                    style={[C2, styles.LoginInputs, Bbc, styles.T5, {marginBottom: 6}]} value={tel}\n                    returnKeyType={\"done\"}\n                    onChange={(t)=>setTel(t)}\n                    onSubmitEditing={({nativeEvent: {text, eventCount, target}}) => {\n                        let myreg = /^[1][3,4,5,7,8][0-9]{9}$/;\n                        if (myreg.test(text)) {\n                            mFun()\n                            setTel(text)\n                            setCodeB(true)      //验证码\n                            setEnd(false)   //不可输入\n                        } else {\n                            Alert.alert('号码错误', '输入的电话格式不对')\n                        }\n                    }}\n                    onChangeText={text => setTel(text)}/>\n            </View>\n\n            {codeB?<View style={{width: '30%', marginTop: 20}}>\n                <Text style={[styles.T5, C2, styles.bold, {opacity: 0.9}]}><Text style={styles.LoginRed}>* </Text>输入验证码</Text>\n                <TextInput style={[C2, styles.LoginInputs, Bbc, styles.T5, {marginBottom: 6}]}\n                           defaultValue={code}\n                           keyboardType={'number-pad'}\n                           returnKeyType={\"done\"}\n                           onChange={(t)=>setCode(t)}\n                           onSubmitEditing={({nativeEvent: {text, eventCount, target}}) => {\n                               let arg = /^\\d{6}$/\n                               if (arg.test(text)) {\n                                   console.log('验证码', text)\n                                   setCode(text)\n                               } else {\n                                   Alert.alert('输入错误')\n                               }\n\n                           }}/>\n                <View>\n                    {m?<Text style={[styles.T6, C2, styles.bold,styles.LoginYe]}>{m}秒</Text>:\n                        <TouchableOpacity onPress={() => mFun()}>\n                            <Text style={[styles.T6, C2, styles.bold]}>重新获取 </Text>\n                        </TouchableOpacity>}\n                </View>\n            </View>:''}\n\n\n            {code.length==6?<TouchableOpacity onPress={() => _Login(tel,cb=>{\n                console.log('登陆信息',cb)\n                navigation.navigate('List')\n            })}>\n                <Text style={styles.loginBtn}>使 用</Text>\n            </TouchableOpacity>:''}\n\n\n        </View>\n    </View>\n}\n"],"mappings":";;;;;;;;;AACA,SAAQA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAO,OAAO;AACjD,SAAQC,MAAM;AACd,SAAQC,MAAM;AAAiB;AAAA;AAG/B,OAAO,SAASC,KAAK,OAAe;EAAA,IAAbC,UAAU,QAAVA,UAAU;EAC7BA,UAAU,CAACC,WAAW,CAAC,OAAO,EAAE,YAAM;IAClCD,UAAU,CAACE,UAAU,CAAC;MAClBC,WAAW,EAAE;IACjB,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACvB,CAAC,CAAC;EACFL,UAAU,CAACC,WAAW,CAAC,MAAM,EAAE,YAAM;IACjCG,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACvB,CAAC,CAAC;EAEF,IAAMC,WAAW,GAAGC,cAAc,EAAE;EACpC,IAAMC,EAAE,GAAGF,WAAW,IAAI,OAAO,GAAGT,MAAM,CAACY,OAAO,GAAGZ,MAAM,CAACa,MAAM;EAClE,IAAMC,EAAE,GAAGL,WAAW,IAAI,OAAO,GAAG;IAACM,KAAK,EAAE;EAAS,CAAC,GAAGf,MAAM,CAACgB,MAAM;EACtE,IAAMC,GAAG,GAAGR,WAAW,IAAI,OAAO,GAAG;IAACS,WAAW,EAAE;EAAS,CAAC,GAAG;IAACA,WAAW,EAAE;EAAM,CAAC;EACrF,IAAMC,iBAAiB,GAAGV,WAAW,IAAI,OAAO,GAAG,SAAS,GAAG,SAAS;EAExE,gBAAkBV,QAAQ,CAAC,CAAC,CAAC;IAAA;IAAtBqB,CAAC;IAAEC,IAAI;EACd,IAAMC,IAAI,GAAGxB,MAAM,CAACsB,CAAC,CAAC;EACtBE,IAAI,CAACC,OAAO,GAAGH,CAAC;EAEhB,iBAAqBrB,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA5ByB,GAAG;IAACC,MAAM;EACjB,iBAAqB1B,QAAQ,CAAC2B,MAAM,CAAC;IAAA;IAA9BC,GAAG;IAACC,MAAM;EACjB,iBAAuB7B,QAAQ,CAAC,CAAC,CAAC;IAAA;IAA3B8B,IAAI;IAACC,OAAO;EACnB,iBAAyB/B,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAjCgC,KAAK;IAACC,QAAQ;EAIrB,IAAMC,IAAI,GAAG,SAAPA,IAAI,GAAS;IACfZ,IAAI,CAAC,EAAE,CAAC;IACR,IAAIa,IAAI,GAAGC,WAAW,CAAC,YAAM;MACzB,IAAIb,IAAI,CAACC,OAAO,IAAI,CAAC,EAAE;QACnBa,aAAa,CAACF,IAAI,CAAC;QACnBT,MAAM,CAAC,KAAK,CAAC;MACjB;MACAJ,IAAI,CAACC,IAAI,CAACC,OAAO,GAAG,CAAC,CAAC;IAC1B,CAAC,EAAE,IAAI,CAAC;EACZ,CAAC;EAED,OAAO,KAAC,IAAI;IAAC,KAAK,EAAE,CAACvB,MAAM,CAACE,KAAK,EAAES,EAAE,CAAE;IAAA,UACnC,MAAC,IAAI;MAAC,KAAK,EAAE,CAACX,MAAM,CAACqC,QAAQ,CAAE;MAAA,WAC3B,KAAC,IAAI;QAAC,KAAK,EAAE,CAACrC,MAAM,CAACsC,EAAE,EAAEtC,MAAM,CAACuC,IAAI,EAAEzB,EAAE,EAAE;UAAC0B,YAAY,EAAE;QAAE,CAAC,EAAE;UAACzB,KAAK,EAAE;QAAS,CAAC,CAAE;QAAA;MAAA,EAAa,EAC/F,MAAC,IAAI;QAAC,KAAK,EAAE,CAACf,MAAM,CAACyC,EAAE,EAAE3B,EAAE,EAAE;UAAC4B,OAAO,EAAE;QAAG,CAAC,EAAE1C,MAAM,CAACuC,IAAI,CAAE;QAAA,oDAAQ,KAAC,IAAI;UACnE,KAAK,EAAEvC,MAAM,CAAC2C,aAAc;UAAA;QAAA,EAAoB;MAAA,EAAuB,EAE3E,MAAC,IAAI;QAAC,KAAK,EAAE;UAACC,KAAK,EAAE,KAAK;UAAEC,SAAS,EAAE;QAAE,CAAE;QAAA,WACvC,MAAC,IAAI;UAAC,KAAK,EAAE,CAAC7C,MAAM,CAACyC,EAAE,EAAE3B,EAAE,EAAEd,MAAM,CAACuC,IAAI,EAAE;YAACG,OAAO,EAAE;UAAG,CAAC,CAAE;UAAA,WAAC,KAAC,IAAI;YAAC,KAAK,EAAE1C,MAAM,CAAC8C,QAAS;YAAA;UAAA,EAAU;QAAA,EAAW,EAC7G,KAAC,SAAS;UACN,YAAY,EAAEnB,GAAI;UAClB,QAAQ,EAAEH,GAAI;UACd,YAAY,EAAE,YAAa;UAC3B,KAAK,EAAE,CAACV,EAAE,EAAEd,MAAM,CAAC+C,WAAW,EAAE9B,GAAG,EAAEjB,MAAM,CAACyC,EAAE,EAAE;YAACD,YAAY,EAAE;UAAC,CAAC,CAAE;UAAC,KAAK,EAAEb,GAAI;UAC/E,aAAa,EAAE,MAAO;UACtB,QAAQ,EAAE,kBAACqB,CAAC;YAAA,OAAGpB,MAAM,CAACoB,CAAC,CAAC;UAAA,CAAC;UACzB,eAAe,EAAE,gCAA+C;YAAA,8BAA7CC,WAAW;cAAGC,IAAI,qBAAJA,IAAI;cAAEC,UAAU,qBAAVA,UAAU;cAAEC,MAAM,qBAANA,MAAM;YACrD,IAAIC,KAAK,GAAG,0BAA0B;YACtC,IAAIA,KAAK,CAACC,IAAI,CAACJ,IAAI,CAAC,EAAE;cAClBjB,IAAI,EAAE;cACNL,MAAM,CAACsB,IAAI,CAAC;cACZlB,QAAQ,CAAC,IAAI,CAAC;cACdP,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC,MAAM;cACH8B,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,WAAW,CAAC;YACpC;UACJ,CAAE;UACF,YAAY,EAAE,sBAAAN,IAAI;YAAA,OAAItB,MAAM,CAACsB,IAAI,CAAC;UAAA;QAAC,EAAE;MAAA,EACtC,EAENnB,KAAK,GAAC,MAAC,IAAI;QAAC,KAAK,EAAE;UAACa,KAAK,EAAE,KAAK;UAAEC,SAAS,EAAE;QAAE,CAAE;QAAA,WAC9C,MAAC,IAAI;UAAC,KAAK,EAAE,CAAC7C,MAAM,CAACyC,EAAE,EAAE3B,EAAE,EAAEd,MAAM,CAACuC,IAAI,EAAE;YAACG,OAAO,EAAE;UAAG,CAAC,CAAE;UAAA,WAAC,KAAC,IAAI;YAAC,KAAK,EAAE1C,MAAM,CAAC8C,QAAS;YAAA;UAAA,EAAU;QAAA,EAAY,EAC9G,KAAC,SAAS;UAAC,KAAK,EAAE,CAAChC,EAAE,EAAEd,MAAM,CAAC+C,WAAW,EAAE9B,GAAG,EAAEjB,MAAM,CAACyC,EAAE,EAAE;YAACD,YAAY,EAAE;UAAC,CAAC,CAAE;UACnE,YAAY,EAAEX,IAAK;UACnB,YAAY,EAAE,YAAa;UAC3B,aAAa,EAAE,MAAO;UACtB,QAAQ,EAAE,kBAACmB,CAAC;YAAA,OAAGlB,OAAO,CAACkB,CAAC,CAAC;UAAA,CAAC;UAC1B,eAAe,EAAE,gCAA+C;YAAA,8BAA7CC,WAAW;cAAGC,IAAI,qBAAJA,IAAI;cAAEC,UAAU,qBAAVA,UAAU;cAAEC,MAAM,qBAANA,MAAM;YACrD,IAAIK,GAAG,GAAG,SAAS;YACnB,IAAIA,GAAG,CAACH,IAAI,CAACJ,IAAI,CAAC,EAAE;cAChB3C,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE0C,IAAI,CAAC;cACxBpB,OAAO,CAACoB,IAAI,CAAC;YACjB,CAAC,MAAM;cACHK,KAAK,CAACC,KAAK,CAAC,MAAM,CAAC;YACvB;UAEJ;QAAE,EAAE,EACf,KAAC,IAAI;UAAA,UACApC,CAAC,GAAC,MAAC,IAAI;YAAC,KAAK,EAAE,CAACpB,MAAM,CAAC0D,EAAE,EAAE5C,EAAE,EAAEd,MAAM,CAACuC,IAAI,EAACvC,MAAM,CAAC2D,OAAO,CAAE;YAAA,WAAEvC,CAAC;UAAA,EAAS,GACpE,KAAC,gBAAgB;YAAC,OAAO,EAAE;cAAA,OAAMa,IAAI,EAAE;YAAA,CAAC;YAAA,UACpC,KAAC,IAAI;cAAC,KAAK,EAAE,CAACjC,MAAM,CAAC0D,EAAE,EAAE5C,EAAE,EAAEd,MAAM,CAACuC,IAAI,CAAE;cAAA;YAAA;UAAa;QACxC,EACpB;MAAA,EACJ,GAAC,EAAE,EAGTV,IAAI,CAAC+B,MAAM,IAAE,CAAC,GAAC,KAAC,gBAAgB;QAAC,OAAO,EAAE;UAAA,OAAM3D,MAAM,CAAC0B,GAAG,EAAC,UAAAkC,EAAE,EAAE;YAC5DtD,OAAO,CAACC,GAAG,CAAC,MAAM,EAACqD,EAAE,CAAC;YACtB1D,UAAU,CAAC2D,QAAQ,CAAC,MAAM,CAAC;UAC/B,CAAC,CAAC;QAAA,CAAC;QAAA,UACC,KAAC,IAAI;UAAC,KAAK,EAAE9D,MAAM,CAAC+D,QAAS;UAAA;QAAA;MAAW,EACzB,GAAC,EAAE;IAAA;EAGnB,EACJ;AACX"},"metadata":{},"sourceType":"module"}